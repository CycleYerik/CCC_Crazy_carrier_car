# 电机驱动

## 概述
移植自张大头步进电机驱动代码，采用串口总线与四个电机进行通信，通过串口发送数据控制电机的转动，也接受电机的反馈的转速和位置数据

**电机控制思路和协议**
- 每次发送指令后需要延时10ms，在main函数中调用`HAL_Delay(10)`即可，在定时器中则借助计数变量进行延时
- 四个电机的地址分别为1,2,3,4，分别对应左前轮、右前轮、左后轮、右后轮
- 目前的电机控制函数中带有velocity的都暂时不适用，因为速度模式偏差太大



## 使用
- 在cubemx中配置串口usart1，配置串口的波特率为115200
- 在main.c中引入头文件`#include "motor.h"`
- 调用各种函数即可，传入速度、加速度、移动距离、电机地址等参数
- 主要使用的是`move_all_direction_position`这一函数
- 小车的坐标系是：前进方向为y轴正方向，右侧为x轴正方向

## 已完成
- 电机的转速控制
- 电机的转动圈数控制
- 电机的停车控制
- 读取电机的转速和位置数据
- 电机的原地旋转
- 重写电机驱动函数，实现用中断计时代替HAL_Delay，实现电机的驱动控制

## 待完成
- 电机PID控制转速
- 电机校正函数（结合陀螺仪、视觉等进行行驶方向的辅助校正）
- 执行特定路径的控制（如从原点到某个点）






