# 舵机模块  
主要是实现舵机的控制，也是尽量在底层驱动的基础上进行封装，方便上层调用


## 概述
文件夹中的各个.c .h文件都是复制自商家的驱动

***舵机线加长不能用普通杜邦线，一定要用乔兰多线！！！！***
***舵机线加长不能用普通杜邦线，一定要用乔兰多线！！！！***
***舵机线加长不能用普通杜邦线，一定要用乔兰多线！！！！***

***舵机的参数可能会因为重新装车而发生变化，所以在使用前一定要重新测试！！！！***
***舵机的参数可能会因为重新装车而发生变化，所以在使用前一定要重新测试！！！！***
***舵机的参数可能会因为重新装车而发生变化，所以在使用前一定要重新测试！！！！***

## 使用
在main中先`Uart_Init(115200); `然后直接调用`feetech_servo_move`函数，传入对应的参数即可（该函数自带延时）

### 普通舵机参数
**注意：下列参数值可能会因为重新装车而导致变化，如果变化了就得重新测试**

1. 夹爪舵机：夹爪开口则用用__HAL_TIM_SET_COMPARE,参数为150，夹爪关闭则参数为115
2. 机械臂伸长舵机：伸长则是用__HAL_TIM_SET_COMPARE,参数为140，缩短到物品则为225
3. 载物台舵机：三个参数分别为65,151,235(实测得到，与理论值有偏差)


### 精密舵机参数

1. 绳驱舵机：3800最低点，1200最高点
2. 夹爪底部旋转舵机：3857 放置物料到盘上，  1280 抓取物料  （4095速度下，大概2s到位）
3. 中板旋转舵机：800 居中，  1600 右转大角度，0 左转大角度

## 控制思路
1. 精密舵机
精密舵机对应的position为：0-4095
速度为：0-2250
加速度为：0-50（不确定）

2. 普通舵机
普通舵机的工作频率为50Hz，预分频系数Prescaler为1680-1，Counter Period的值为2000-1，所以要用`__HAL_TIM_SET_COMPARE(&htim4, TIM_CHANNEL_1, 250);`来控制舵机的角度。高电平时间为
0.5ms~2.5ms对应0°~270°或者0-180，总的周期为20ms，0-270对应的占空比为2.5%~12.5%，对应的计数值为50~250。（注：mg996r是270度，而ds3120是180度）


## 动作设计

### 夹取


## 已完成
- 精密舵机的简单控制
- 普通舵机的简单控制

## 未完成
- 给出精密舵机和普通舵机的精准延时时间（既要保证舵机旋转到了给定给定位置，不会提前停下，又要保证不会因为延时时间过长而影响整体的运行速度）
- 梳理舵机的控制思路，测出初始的位置角度
- 规划舵机的转动情况，保证每次转动都是从相应的位置开始转动，不会因为上一次的转动而影响下一次的转动
